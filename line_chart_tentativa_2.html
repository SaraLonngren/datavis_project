<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Gráfico de linha</title>
    <link rel="stylesheet" href="css/dc.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/crossfilter.min.js"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="js/dc.min.js"></script>

</head>
<body>
     <div><h1>Gráfico de linha - tentativa fustrada 2</h1>
        <div id="chart"></div>
    </div>

    <script type="text/javascript">
        var line_Chart = dc.seriesChart('#chart');      

        d3.csv("line_chart_data_2018.csv").then(function(data){
        	
            var facts = crossfilter(data);

			var parseDate = d3.timeParse("%d/%m/%Y");

			data.forEach(function(d){
                d.date = parseDate(d.date);
            });

            var yearDateDim = facts.dimension(function(d){
                return [+d.year, +d.date];
            });

            var amountGroup = yearDateDim.group().reduceSum(function(d){
                return +d.amount;
            });

            line_Chart.dimension(yearDateDim)
                      .group(amountGroup);
                    // .lineChart(function(c){ return dc.lineChart(c).curve(d3.curveCardinal); });

            dc.renderAll();
         });
    </script>           
</body>
</html>